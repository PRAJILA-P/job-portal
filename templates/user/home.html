{% extends 'base.html' %}
{% load static %}

{% block content %}

<!-- HOME -->
<section class="home-section section-hero overlay bg-image" 
         style='background-image: url("{% static "images/hero_1.jpg" %}");' 
         id="home-section">

  <div class="container">
    <div class="row align-items-center justify-content-center">
      <div class="col-md-12">
        <div class="mb-5 text-center">
          <h1 class="text-white font-weight-bold">The Easiest Way To Get Your Dream Job</h1>
        <p>Find jobs that match your skills and ambitions. Apply with ease and grow your career.</p>
        </div>
       <!-- Add this anywhere in your template, usually inside <body> -->




        <form method="GET" action="{% url 'user:index' %}" class="search-jobs-form">
  <div class="row mb-5">
    <!-- Job title input -->
    <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
      <input type="text" name="query" class="form-control form-control-lg" placeholder="Job title, Company..." value="{{ request.GET.query }}">
    </div>

 <!-- Job location dropdown -->
<div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
  <select name="location" class="form-control form-control-lg">
    <option value="">Select Location</option>
    {% for loc in locations %}
      <option value="{{ loc }}" {% if selected_location == loc %}selected{% endif %}>
        {{ loc }}
      </option>
    {% endfor %}
  </select>
</div>


    <!-- Job type dropdown -->
    <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
      <select name="job_type" class="form-control form-control-lg">
  <option value="">Select Job Type</option>
  {% for value, display in job_types_choices %}
    <option value="{{ value }}" {% if selected_job_type == value %}selected{% endif %}>
      {{ display }}
    </option>
  {% endfor %}
</select>

    </div>

    <!-- Submit button -->
    <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
      <button type="submit" class="btn btn-primary btn-lg btn-block text-white btn-search">
        <span class="icon-search icon mr-2"></span>Search Job
      </button>
    </div>
  </div>
</form>

<!-- <form method="post" class="search-jobs-form">
  <div class="row mb-5"> -->
    <!-- Job title input -->
    <!-- <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
      <input type="text" class="form-control form-control-lg" placeholder="Job title, Company...">
    </div> -->

    <!-- Region dropdown -->
    <!-- <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
      <select class="form-control form-control-lg">
        <option selected disabled>Select Region</option>
        <option>Anywhere</option>
        <option>San Francisco</option>
        <option>Palo Alto</option>
        <option>New York</option>
        <option>Manhattan</option>
        <option>Ontario</option>
        <option>Toronto</option>
        <option>Kansas</option>
        <option>Mountain View</option>
      </select>
    </div> -->

    <!-- Job type dropdown -->
    <!-- <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
      <select class="form-control form-control-lg">
        <option selected disabled>Select Job Type</option>
        <option>Part Time</option>
        <option>Full Time</option>
      </select>
    </div> -->

    <!-- Submit button -->
    <!-- <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
      <button type="submit" class="btn btn-primary btn-lg btn-block text-white btn-search">
        <span class="icon-search icon mr-2"></span>Search Job
      </button>
    </div>
  </div> -->

  <!-- Keywords section -->
  <!-- <div class="row">
    <div class="col-md-12 popular-keywords">
      <h3>Trending Keywords:</h3>
      <ul class="keywords list-unstyled m-0 p-0">
        <li><a href="#">UI Designer</a></li>
        <li><a href="#">Python</a></li>
        <li><a href="#">Developer</a></li>
      </ul>
    </div>
  </div>
</form> -->

      </div>
    </div>
  </div>

  <a href="#next" class="scroll-button smoothscroll">
    <span class="icon-keyboard_arrow_down"></span>
  </a>
</section>


<!-- STATS SECTION -->
<!-- <section class="py-5 bg-image overlay-primary fixed overlay" 
         id="next" 
         style='background-image: url("{% static "images/hero_1.jpg" %}");'>

  <div class="container">
    <div class="row mb-5 justify-content-center">
      <div class="col-md-7 text-center">
        <h2 class="section-title mb-2 text-white">JobBoard Site Stats</h2>
        <p class="lead text-white">Lorem ipsum dolor sit amet consectetur adipisicing elit. Expedita unde officiis recusandae sequi excepturi corrupti.</p>
      </div>
    </div>

    <div class="row pb-0 block__19738 section-counter">

      <div class="col-6 col-md-6 col-lg-3 mb-5 mb-lg-0">
        <div class="d-flex align-items-center justify-content-center mb-2">
          <strong class="number" data-number="1930">0</strong>
        </div>
        <span class="caption">Candidates</span>
      </div>

      <div class="col-6 col-md-6 col-lg-3 mb-5 mb-lg-0">
        <div class="d-flex align-items-center justify-content-center mb-2">
          <strong class="number" data-number="54">0</strong>
        </div>
        <span class="caption">Jobs Posted</span>
      </div>

      <div class="col-6 col-md-6 col-lg-3 mb-5 mb-lg-0">
        <div class="d-flex align-items-center justify-content-center mb-2">
          <strong class="number" data-number="120">0</strong>
        </div>
        <span class="caption">Jobs Filled</span>
      </div>

      <div class="col-6 col-md-6 col-lg-3 mb-5 mb-lg-0">
        <div class="d-flex align-items-center justify-content-center mb-2">
          <strong class="number" data-number="550">0</strong>
        </div>
        <span class="caption">Companies</span>
      </div>

    </div>
  </div>
</section> -->


<!-- Explore By Category Section -->


<section class="site-section" style="padding-top:50px; padding-bottom:50px; margin-top:0;">
  <div class="container">

    <!-- Section Title -->
    <div class="row mb-1 justify-content-center">
      <div class="col-md-7 text-center">
        <h2 class="section-title mb-2"> Job Listed</h2>
        <p class="text-muted">Find your next opportunity</p>
      </div>
    </div>
    
    <!-- Job Listings -->
    <ul class="job-listings mb-5">
      {% for job in jobs %}
      <li class="job-listing d-block d-sm-flex pb-3 pb-sm-0 align-items-center">
        <a href="{% url 'user:job_detail' job.id %}"></a>

        <!-- Company Logo -->
        <div class="job-listing-logo">
          {% if job.recruiter.profile.logo %}
          <img src="{{ job.recruiter.profile.logo.url }}" alt="{{ job.recruiter.company_name }}" class="img-fluid">
          {% else %}
          <img src="{% static 'images/default_logo.png' %}" alt="{{ job.recruiter.company_name }}" class="img-fluid">
          {% endif %}
        </div>

        <!-- Job Info -->
        <div class="job-listing-about d-sm-flex custom-width w-100 justify-content-between mx-4">
          <div class="job-listing-position custom-width w-50 mb-3 mb-sm-0">
            <h2>{{ job.title }}</h2>
            <strong>{{ job.recruiter.company_name }}</strong>
          </div>

          <div class="job-listing-location mb-3 mb-sm-0 custom-width w-25">
            <span class="icon-room"></span> {{ job.location }}
          </div>

          <div class="job-listing-meta">
            {% if job.job_type == "FT" %}
            <span class="badge badge-success">Full Time</span>
            {% elif job.job_type == "PT" %}
            <span class="badge badge-danger">Part Time</span>
            {% elif job.job_type == "IN" %}
            <span class="badge badge-info">Internship</span>
            {% elif job.job_type == "CT" %}
            <span class="badge badge-warning">Contract</span>
            {% elif job.job_type == "FR" %}
            <span class="badge badge-secondary">Freelance</span>
            {% endif %}
          </div>
        </div>
      </li>
      {% empty %}
      <p class="text-center">No jobs available right now.</p>
      {% endfor %}
    </ul>

    <!-- Pagination -->
    {% if jobs.has_other_pages %}
    <div class="row pagination-wrap">
      <div class="col-md-12 text-center">
        <div class="custom-pagination">
          {% if jobs.has_previous %}
            <a href="?page={{ jobs.previous_page_number }}" class="prev">Prev</a>
          {% endif %}

          {% for num in jobs.paginator.page_range %}
            {% if jobs.number == num %}
              <a href="?page={{ num }}" class="active">{{ num }}</a>
            {% else %}
              <a href="?page={{ num }}">{{ num }}</a>
            {% endif %}
          {% endfor %}

          {% if jobs.has_next %}
            <a href="?page={{ jobs.next_page_number }}" class="next">Next</a>
          {% endif %}
        </div>
      </div>
    </div>
    {% endif %}

  </div>
</section>


<section class="explore-category py-5">
  <div class="container">
  <h2 class="text-center mb-5">Explore By Category</h2>
  <div class="row">
    {% for category in categories %}
      <div class="col-md-3 col-sm-6 mb-4">
        <div class="category-card text-center p-4 shadow-sm h-100">
          <a href="{% url 'user:jobs_by_category' category.slug %}">
            <div class="icon mb-3">
              <i class="{{ category.icon_class }} fa-2x text-success"></i>
            </div>
            <h5 class="mb-2">{{ category.name }}</h5>
            <p class="text-success mb-0">
              {{ category.jobs.count }} Vacancy
            </p>
          </a>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

</section>




    <section class="py-5 bg-image overlay-primary fixed overlay" style="background-image: url('images/hero_1.jpg');">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-8">
            <h2 class="text-white">Looking For A Job?</h2>
            <p class="mb-0 text-white lead">Find your dream job today and connect with top companies in your field.</p>
          </div>
          <div class="col-md-3 ml-auto">
            <a href="{% url 'user:login' %}" class="btn btn-warning btn-block btn-lg">Sign Up</a>
          </div>
        </div>
      </div>
    </section>
<style>
.explore-category h2 {
  font-weight: bold;
  color: #333;
}
.category-card {
  background: #fff;
  border-radius: 8px;
  transition: all 0.3s ease;
  min-height: 180px; /* Ensures equal height */
  display: flex;
  flex-direction: column;
  justify-content: center;
}
.category-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}
.category-card .icon {
  color: #28a745;
}
.category-card a {
  text-decoration: none;
  color: #28a745;
  font-weight: 500;
}
/* Add this in your CSS file or inside <style> tag */
.join-chat-btn {
    position: fixed;       /* fixed relative to the viewport */
    bottom: 20px;          /* distance from bottom */
    right: 20px;           /* distance from right */
    z-index: 1000;         /* ensure it’s above other elements */
    border-radius: 50px;   /* optional: make it rounded */
    padding: 12px 20px;    /* optional: size */
}

</style>

<!-- FontAwesome CDN (works without account) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">


{% endblock %}